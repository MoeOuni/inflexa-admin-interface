import{b5 as Ze,g as F,J as De,K as es,M as T,e as ss,N as as,z as _e,j as e,C as Ve,a as Ye,b as Be,B as A,H as ze,m as $,c as Ke,ac as ts,u as Qe,D as H,n as L,o as _,p as Ge,q as Je,x as v,ad as rs,s as ns,t as cs,v as is,w as ls,b6 as ds,I as os,E as ms,F as M,L as hs,b7 as us,b8 as xs,G as fs}from"./index-Cpj_313k.js";import{S as I}from"./separator-CbIO-aeg.js";import{u as gs,O as js,C as ps,R as ys,A as Ns,F as bs,a as ws}from"./order-review-skeleton-CNh9FqML.js";import{O as We}from"./order-CDZIasR2.js";import{E as Cs,u as Ss,g as Os,a as Fs,b as vs,c as As,f as Ue}from"./index-BQcsQ1J8.js";import{T as ks,a as Ms,b as U,c as Rs,d as Es,e as $e}from"./table-CP6PtkBs.js";import{o as qe}from"./order-query-keys-CKvnANFa.js";import{S as Ps,L as Ts,T as Is}from"./trash-Kh0MbTyJ.js";import{B as Us}from"./box-BfyP_raW.js";import{C as $s}from"./circle-check-big-CWDsQ4M3.js";import{T as qs}from"./index-BFjICAYF.js";import{A as Hs,a as Ls}from"./arrow-down-wide-narrow-BA2zBQjS.js";import{S as _s}from"./square-plus-BaUgSyD7.js";import{L as Vs,F as Ys}from"./list-filter-CdU8SF-_.js";import"./index-Bp5P_O-9.js";import"./index-BZdzFUmg.js";import"./AntdIcon-CFOhqONk.js";import"./shadow-smhd3i8u.js";import"./colors-CxA5wLuG.js";import"./genComponentStyleHook-BLUmqr6G.js";import"./toArray-DaCh-VYn.js";var Bs=function(){var r=Ze(F.useState({}),2),a=r[1];return F.useCallback(function(){return a({})},[])};function zs(){const r=De();return es({mutationFn:async n=>await ss.patch(`/orders/update-status/${n.id}/?status=${n.status}`),onMutate:async()=>{await r.cancelQueries({queryKey:qe.all})},onSuccess:()=>{T.success("Order status updated successfully")},onError:n=>{var h,m;T.error(((m=(h=n==null?void 0:n.response)==null?void 0:h.data)==null?void 0:m.message)||"An error occurred. Please try again.")},onSettled:()=>{r.invalidateQueries({queryKey:qe.all})}})}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=as("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Qs=({orderId:r})=>{var h,m,j,x,y,N,l,f,S,p,b,g,w,O,s,t,i,c,d,u,o,C,E,V,Y,B,z,K,Q,G,J,W,X,Z,D,ee,se,ae,te,re,ne,ce,ie,le,de,oe,me,he,ue,xe,fe,ge,je,pe,ye,Ne,be,we,Ce,Se,Oe,Fe,ve,Ae,ke,Me,Re,Ee,Pe,Te;const a=gs(r),{storeConfiguration:n}=_e();return e.jsx(Ve,{className:"overflow-hidden","x-chunk":"dashboard-05-chunk-4",children:a.isPending?e.jsx(js,{}):e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{className:"bg-muted/50",children:[e.jsxs("div",{className:"flex flex-row items-start ",children:[e.jsx("div",{className:"grid gap-0.5",children:e.jsxs(Be,{className:"group flex items-center gap-2 text-lg",children:["Order ",(m=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:m.orderNumber,e.jsxs(A,{size:"icon",variant:"outline",className:"h-6 w-6 opacity-0 transition-opacity group-hover:opacity-100",children:[e.jsx(ps,{className:"h-3 w-3"}),e.jsx("span",{className:"sr-only",children:"Copy Order ID"})]})]})}),e.jsx("div",{className:"ml-auto flex items-center gap-1",children:e.jsx(We,{status:(x=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:x.status})})]}),e.jsxs(ze,{children:["Date:"," ",$((N=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:N.createdAt).format("MMMM DD, YYYY")]})]}),e.jsxs(Ke,{className:"p-6 text-sm",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"font-semibold",children:"Order Details"}),e.jsx("ul",{className:"grid gap-3",children:(S=(f=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:f.products)==null?void 0:S.map(k=>{var Ie;return e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[(Ie=k==null?void 0:k.product)==null?void 0:Ie.name," x ",e.jsx("span",{children:k.quantity})]}),e.jsxs("span",{children:[(k.price*k.quantity).toFixed(2)," ",n==null?void 0:n.currency]})]},k._id)})}),e.jsx(I,{className:"my-2"}),e.jsxs("ul",{className:"grid gap-3",children:[e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:[(g=(b=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:b.totalAmount)==null?void 0:g.toFixed(2)," ",n==null?void 0:n.currency]})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsxs("span",{children:[(s=(O=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:O.deliveryPrice)==null?void 0:s.toFixed(2)," ",n==null?void 0:n.currency]})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsxs("span",{children:[(c=(i=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:i.totalTax)==null?void 0:c.toFixed(2)," ",n==null?void 0:n.currency]})]}),e.jsxs("li",{className:"flex items-center justify-between font-semibold",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total"}),e.jsxs("span",{children:[(((u=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:u.totalTax)+((C=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:C.deliveryPrice)+((V=(E=a==null?void 0:a.data)==null?void 0:E.data)==null?void 0:V.totalAmount)).toFixed(2)," ",n==null?void 0:n.currency]})]})]})]}),e.jsx(I,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"font-semibold",children:"Shipping Information"}),e.jsxs("address",{className:"grid gap-0.5 not-italic text-muted-foreground",children:[e.jsx("span",{children:(z=(B=(Y=a==null?void 0:a.data)==null?void 0:Y.data)==null?void 0:B.customer)==null?void 0:z.name}),e.jsxs("span",{children:[(G=(Q=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:Q.shippingAddress)==null?void 0:G.state,","," ",(X=(W=(J=a==null?void 0:a.data)==null?void 0:J.data)==null?void 0:W.shippingAddress)==null?void 0:X.city,","," ",(ee=(D=(Z=a==null?void 0:a.data)==null?void 0:Z.data)==null?void 0:D.shippingAddress)==null?void 0:ee.country]}),e.jsxs("span",{children:[(te=(ae=(se=a==null?void 0:a.data)==null?void 0:se.data)==null?void 0:ae.shippingAddress)==null?void 0:te.street,","," ",(ce=(ne=(re=a==null?void 0:a.data)==null?void 0:re.data)==null?void 0:ne.shippingAddress)==null?void 0:ce.postalCode]})]})]}),e.jsxs("div",{className:"grid auto-rows-max gap-3",children:[e.jsx("div",{className:"font-semibold",children:"Billing Information"}),e.jsxs("div",{className:"grid gap-0.5 not-italic text-muted-foreground",children:[e.jsxs("span",{children:[(de=(le=(ie=a==null?void 0:a.data)==null?void 0:ie.data)==null?void 0:le.billingAddress)==null?void 0:de.state,","," ",(he=(me=(oe=a==null?void 0:a.data)==null?void 0:oe.data)==null?void 0:me.billingAddress)==null?void 0:he.city,","," ",(fe=(xe=(ue=a==null?void 0:a.data)==null?void 0:ue.data)==null?void 0:xe.billingAddress)==null?void 0:fe.country]}),e.jsxs("span",{children:[(pe=(je=(ge=a==null?void 0:a.data)==null?void 0:ge.data)==null?void 0:je.billingAddress)==null?void 0:pe.street,","," ",(be=(Ne=(ye=a==null?void 0:a.data)==null?void 0:ye.data)==null?void 0:Ne.billingAddress)==null?void 0:be.postalCode]})]})]})]}),e.jsx(I,{className:"my-4"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"font-semibold",children:"Customer Information"}),e.jsxs("dl",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Customer"}),e.jsx("dd",{children:(Se=(Ce=(we=a==null?void 0:a.data)==null?void 0:we.data)==null?void 0:Ce.customer)==null?void 0:Se.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Email"}),e.jsx("dd",{children:e.jsx("a",{href:"mailto:",children:((Ae=(ve=(Fe=(Oe=a==null?void 0:a.data)==null?void 0:Oe.data)==null?void 0:Fe.customer)==null?void 0:ve.contactInfo)==null?void 0:Ae.email)||"-"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Phone"}),e.jsx("dd",{children:e.jsx("a",{href:"tel:",children:((Ee=(Re=(Me=(ke=a==null?void 0:a.data)==null?void 0:ke.data)==null?void 0:Me.customer)==null?void 0:Re.contactInfo)==null?void 0:Ee.phone)||"-"})})]})]})]})]}),e.jsx(ts,{className:"flex flex-row items-center border-t bg-muted/50 px-6 py-3",children:e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Updated"," ",e.jsx("time",{dateTime:"2023-11-23",children:$((Te=(Pe=a==null?void 0:a.data)==null?void 0:Pe.data)==null?void 0:Te.updatedAt).format("MMMM DD, YYYY")})]})})]})})};function Gs({order:r}){const{t:a}=Qe(),n=zs(),h=async()=>{const p={id:r._id,status:"cancelled"};await n.mutateAsync(p)},m=async()=>{const p={id:r._id,status:"processed"};await n.mutateAsync(p)},j=async()=>{const p={id:r._id,status:"shipped"};await n.mutateAsync(p)},x=async()=>{const p={id:r._id,status:"delivered"};await n.mutateAsync(p)},y=()=>{r!=null&&r.orderPdf?window.open(`http://localhost:5050/${r==null?void 0:r.orderPdf}`,"_blank"):T.info("Order PDF not available")},N=()=>{},l=()=>{},f=()=>{},S=async()=>{var p;if(r!=null&&r.orderPdf){const b=`http://localhost:5050/${r==null?void 0:r.orderPdf}`,w=await(await fetch(b)).blob(),O=URL.createObjectURL(w),s=document.createElement("a");s.href=O,s.download=(p=r==null?void 0:r.orderPdf)==null?void 0:p.split("uploads/")[1],s.click()}else T.info("Order PDF not available")};return e.jsxs(H,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(A,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:a("open_menu")}),e.jsx(Cs,{className:"h-4 w-4"})]})}),e.jsxs(_,{className:"w-64",children:[e.jsx(Ge,{children:"Order Actions"}),e.jsx(Je,{}),e.jsxs(v,{children:[e.jsx(Ps,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit Order"})]}),e.jsxs(v,{onClick:y,children:[e.jsx(Us,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"View Order Details"})]}),e.jsxs(v,{onClick:N,children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Apply Discount"})]}),e.jsxs(v,{onClick:f,children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Issue Refund"})]}),e.jsxs(v,{onClick:l,children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Archive Order"})]}),e.jsxs(v,{onClick:S,children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export Order"})]}),e.jsxs(ns,{children:[e.jsxs(cs,{children:[e.jsx(Ts,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Order Actions"})]}),e.jsx(is,{children:e.jsxs(ls,{children:[e.jsxs(v,{onClick:h,disabled:r.status==="cancelled",children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Cancel Order"})]}),e.jsxs(v,{onClick:m,disabled:r.status==="processed",children:[e.jsx(ds,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Process Order"})]}),e.jsxs(v,{onClick:j,disabled:r.status==="shipped",children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Ship Order"})]}),e.jsxs(v,{onClick:x,disabled:r.status==="delivered",children:[e.jsx($s,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Deliver Order"})]})]})})]})]})]})}function Js({data:r,setOrderId:a,loading:n}){var w,O;const{t:h}=Qe(),{currency:m}=_e(),[j,x]=F.useState([]),[y,N]=F.useState([]),[l,f]=F.useState({}),[S,p]=F.useState({}),b=[{accessorKey:"orderNumber",header:"Reference",cell:({row:s})=>s.original.orderNumber},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx("div",{children:e.jsx(We,{status:s.original.status})})},{accessorKey:"createdAt",header:"Date",cell:({row:s})=>$(s.original.createdAt).format("YYYY-MM-DD HH:mm")},{accessorKey:"totalAmount",header:"Amount",cell:({row:s})=>{var t;return((t=s.original.totalAmount)==null?void 0:t.toFixed(2))+" "+(m==null?void 0:m.symbol)}},{id:"actions",header:"Actions",enableHiding:!1,cell:({row:s})=>e.jsx(Gs,{order:s.original})}],g=Ss({data:r,columns:b,onSortingChange:x,onColumnFiltersChange:N,getCoreRowModel:Os(),getPaginationRowModel:Fs(),getSortedRowModel:vs(),getFilteredRowModel:As(),onColumnVisibilityChange:f,onRowSelectionChange:p,initialState:{pagination:{pageIndex:0,pageSize:10}},state:{sorting:j,columnFilters:y,columnVisibility:l,rowSelection:S}});return e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-4",children:[e.jsx(os,{placeholder:"Search by reference",value:((w=g.getColumn("orderNumber"))==null?void 0:w.getFilterValue())??"",onChange:s=>{var t;return(t=g.getColumn("orderNumber"))==null?void 0:t.setFilterValue(s.target.value)},className:"max-w-xs"}),e.jsxs(H,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(A,{variant:"outline",className:"ml-auto",children:[h("columns")," ",e.jsx(ms,{className:"ml-2 h-4 w-4"})]})}),e.jsx(_,{align:"end",children:g.getAllColumns().filter(s=>s.getCanHide()).map(s=>{var t;return e.jsx(M,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:i=>s.toggleVisibility(!!i),children:String((t=s.columnDef)==null?void 0:t.header)},s.id)})})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ks,{children:[e.jsx(Ms,{children:g.getHeaderGroups().map(s=>e.jsx(U,{children:s.headers.map(t=>e.jsx(Rs,{children:t.isPlaceholder?null:e.jsxs("div",{className:t.column.getCanSort()?"cursor-pointer select-none flex items-center":"",onClick:t.column.getToggleSortingHandler(),children:[e.jsx(qs,{title:t.column.getCanSort()?t.column.getNextSortingOrder()==="asc"?"Sort ascending":t.column.getNextSortingOrder()==="desc"?"Sort descending":"Clear sort":void 0,children:Ue(t.column.columnDef.header,t.getContext())}),{asc:e.jsx(Hs,{className:"h-4 w-4 ml-2"}),desc:e.jsx(Ls,{className:"h-4 w-4 ml-2"})}[t.column.getIsSorted()]??null]})},t.id))},s.id))}),e.jsx(Es,{children:(O=g.getRowModel().rows)!=null&&O.length?g.getRowModel().rows.map(s=>e.jsx(U,{"data-state":s.getIsSelected()&&"selected",onClick:()=>{var t;return a((t=s.original)==null?void 0:t._id)},children:s.getVisibleCells().map(t=>e.jsx($e,{children:Ue(t.column.columnDef.cell,t.getContext())},t.id))},s.id)):e.jsx(U,{children:e.jsx($e,{colSpan:b==null?void 0:b.length,className:"h-24 text-center",children:n?e.jsx("div",{className:"flex justify-center",children:e.jsx(hs,{className:"mr-2 h-5 w-5 animate-spin"})}):"No results."})})})]})}),e.jsx("div",{className:"flex items-center justify-end space-x-2 py-4",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(A,{variant:"outline",size:"sm",onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),children:h("previous")}),e.jsx(A,{variant:"outline",size:"sm",onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),children:h("next")})]})})]})}var P={},Ws=r=>encodeURIComponent(r).replace(/[!'()*]/g,a=>`%${a.charCodeAt(0).toString(16).toUpperCase()}`),Xe="%[a-f0-9]{2}",He=new RegExp("("+Xe+")|([^%]+?)","gi"),Le=new RegExp("("+Xe+")+","gi");function q(r,a){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;a=a||1;var n=r.slice(0,a),h=r.slice(a);return Array.prototype.concat.call([],q(n),q(h))}function Xs(r){try{return decodeURIComponent(r)}catch{for(var a=r.match(He)||[],n=1;n<a.length;n++)r=q(a,n).join(""),a=r.match(He)||[];return r}}function Zs(r){for(var a={"%FE%FF":"��","%FF%FE":"��"},n=Le.exec(r);n;){try{a[n[0]]=decodeURIComponent(n[0])}catch{var h=Xs(n[0]);h!==n[0]&&(a[n[0]]=h)}n=Le.exec(r)}a["%C2"]="�";for(var m=Object.keys(a),j=0;j<m.length;j++){var x=m[j];r=r.replace(new RegExp(x,"g"),a[x])}return r}var Ds=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return Zs(r)}},ea=(r,a)=>{if(!(typeof r=="string"&&typeof a=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(a==="")return[r];const n=r.indexOf(a);return n===-1?[r]:[r.slice(0,n),r.slice(n+a.length)]},sa=function(r,a){for(var n={},h=Object.keys(r),m=Array.isArray(a),j=0;j<h.length;j++){var x=h[j],y=r[x];(m?a.indexOf(x)!==-1:a(x,y,r))&&(n[x]=y)}return n};(function(r){const a=Ws,n=Ds,h=ea,m=sa,j=s=>s==null;function x(s){switch(s.arrayFormat){case"index":return t=>(i,c)=>{const d=i.length;return c===void 0||s.skipNull&&c===null||s.skipEmptyString&&c===""?i:c===null?[...i,[l(t,s),"[",d,"]"].join("")]:[...i,[l(t,s),"[",l(d,s),"]=",l(c,s)].join("")]};case"bracket":return t=>(i,c)=>c===void 0||s.skipNull&&c===null||s.skipEmptyString&&c===""?i:c===null?[...i,[l(t,s),"[]"].join("")]:[...i,[l(t,s),"[]=",l(c,s)].join("")];case"comma":case"separator":return t=>(i,c)=>c==null||c.length===0?i:i.length===0?[[l(t,s),"=",l(c,s)].join("")]:[[i,l(c,s)].join(s.arrayFormatSeparator)];default:return t=>(i,c)=>c===void 0||s.skipNull&&c===null||s.skipEmptyString&&c===""?i:c===null?[...i,l(t,s)]:[...i,[l(t,s),"=",l(c,s)].join("")]}}function y(s){let t;switch(s.arrayFormat){case"index":return(i,c,d)=>{if(t=/\[(\d*)\]$/.exec(i),i=i.replace(/\[\d*\]$/,""),!t){d[i]=c;return}d[i]===void 0&&(d[i]={}),d[i][t[1]]=c};case"bracket":return(i,c,d)=>{if(t=/(\[\])$/.exec(i),i=i.replace(/\[\]$/,""),!t){d[i]=c;return}if(d[i]===void 0){d[i]=[c];return}d[i]=[].concat(d[i],c)};case"comma":case"separator":return(i,c,d)=>{const u=typeof c=="string"&&c.includes(s.arrayFormatSeparator),o=typeof c=="string"&&!u&&f(c,s).includes(s.arrayFormatSeparator);c=o?f(c,s):c;const C=u||o?c.split(s.arrayFormatSeparator).map(E=>f(E,s)):c===null?c:f(c,s);d[i]=C};default:return(i,c,d)=>{if(d[i]===void 0){d[i]=c;return}d[i]=[].concat(d[i],c)}}}function N(s){if(typeof s!="string"||s.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function l(s,t){return t.encode?t.strict?a(s):encodeURIComponent(s):s}function f(s,t){return t.decode?n(s):s}function S(s){return Array.isArray(s)?s.sort():typeof s=="object"?S(Object.keys(s)).sort((t,i)=>Number(t)-Number(i)).map(t=>s[t]):s}function p(s){const t=s.indexOf("#");return t!==-1&&(s=s.slice(0,t)),s}function b(s){let t="";const i=s.indexOf("#");return i!==-1&&(t=s.slice(i)),t}function g(s){s=p(s);const t=s.indexOf("?");return t===-1?"":s.slice(t+1)}function w(s,t){return t.parseNumbers&&!Number.isNaN(Number(s))&&typeof s=="string"&&s.trim()!==""?s=Number(s):t.parseBooleans&&s!==null&&(s.toLowerCase()==="true"||s.toLowerCase()==="false")&&(s=s.toLowerCase()==="true"),s}function O(s,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),N(t.arrayFormatSeparator);const i=y(t),c=Object.create(null);if(typeof s!="string"||(s=s.trim().replace(/^[?#&]/,""),!s))return c;for(const d of s.split("&")){if(d==="")continue;let[u,o]=h(t.decode?d.replace(/\+/g," "):d,"=");o=o===void 0?null:["comma","separator"].includes(t.arrayFormat)?o:f(o,t),i(f(u,t),o,c)}for(const d of Object.keys(c)){const u=c[d];if(typeof u=="object"&&u!==null)for(const o of Object.keys(u))u[o]=w(u[o],t);else c[d]=w(u,t)}return t.sort===!1?c:(t.sort===!0?Object.keys(c).sort():Object.keys(c).sort(t.sort)).reduce((d,u)=>{const o=c[u];return o&&typeof o=="object"&&!Array.isArray(o)?d[u]=S(o):d[u]=o,d},Object.create(null))}r.extract=g,r.parse=O,r.stringify=(s,t)=>{if(!s)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),N(t.arrayFormatSeparator);const i=o=>t.skipNull&&j(s[o])||t.skipEmptyString&&s[o]==="",c=x(t),d={};for(const o of Object.keys(s))i(o)||(d[o]=s[o]);const u=Object.keys(d);return t.sort!==!1&&u.sort(t.sort),u.map(o=>{const C=s[o];return C===void 0?"":C===null?l(o,t):Array.isArray(C)?C.reduce(c(o),[]).join("&"):l(o,t)+"="+l(C,t)}).filter(o=>o.length>0).join("&")},r.parseUrl=(s,t)=>{t=Object.assign({decode:!0},t);const[i,c]=h(s,"#");return Object.assign({url:i.split("?")[0]||"",query:O(g(s),t)},t&&t.parseFragmentIdentifier&&c?{fragmentIdentifier:f(c,t)}:{})},r.stringifyUrl=(s,t)=>{t=Object.assign({encode:!0,strict:!0},t);const i=p(s.url).split("?")[0]||"",c=r.extract(s.url),d=r.parse(c,{sort:!1}),u=Object.assign(d,s.query);let o=r.stringify(u,t);o&&(o=`?${o}`);let C=b(s.url);return s.fragmentIdentifier&&(C=`#${l(s.fragmentIdentifier,t)}`),`${i}${o}${C}`},r.pick=(s,t,i)=>{i=Object.assign({parseFragmentIdentifier:!0},i);const{url:c,query:d,fragmentIdentifier:u}=r.parseUrl(s,i);return r.stringifyUrl({url:c,query:m(d,t),fragmentIdentifier:u},i)},r.exclude=(s,t,i)=>{const c=Array.isArray(t)?d=>!t.includes(d):(d,u)=>!t(d,u);return r.pick(s,c,i)}})(P);const R=xs,aa={parseNumbers:!1,parseBooleans:!1},ta={skipNull:!1,skipEmptyString:!1},ra=(r,a)=>{var n,h;const{navigateMode:m="push",parseOptions:j,stringifyOptions:x}={},y=Object.assign(Object.assign({},aa),j),N=Object.assign(Object.assign({},ta),x),l=R.useLocation(),f=(n=R.useHistory)===null||n===void 0?void 0:n.call(R),S=(h=R.useNavigate)===null||h===void 0?void 0:h.call(R),p=Bs(),b=F.useRef(typeof r=="function"?r():r||{}),g=F.useMemo(()=>P.parse(l.search,y),[l.search]),w=F.useMemo(()=>Object.assign(Object.assign({},b.current),g),[g]);return[w,us(s=>{const t=typeof s=="function"?s(w):s;p(),f&&f[m]({hash:l.hash,search:P.stringify(Object.assign(Object.assign({},g),t),N)||"?"},l.state),S&&S({hash:l.hash,search:P.stringify(Object.assign(Object.assign({},g),t),N)||"?"},{replace:m==="replace",state:l.state})})]},na=({setOrderId:r})=>{var y,N;const a=fs(),[n,h]=ra({status:""}),m=ws({params:n});F.useEffect(()=>{var l,f;((f=(l=m==null?void 0:m.data)==null?void 0:l.data)==null?void 0:f.length)>0&&r(m.data.data[0]._id)},[(y=m.data)==null?void 0:y.data]);const j=()=>{a("/orders/save")},x=(l,f)=>{h(f===!1?{status:""}:{status:l})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 pb-3 flex-col md:flex-row",children:[e.jsxs(A,{className:"h-8 gap-1",size:"sm",onClick:j,children:[e.jsx(_s,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Create New Order"})]}),e.jsxs("div",{className:"md:ml-auto flex items-center gap-2 ",children:[e.jsxs(H,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(A,{variant:"outline",size:"sm",className:"h-7 gap-1 text-sm",children:[e.jsx(Vs,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only",children:"Filter"})]})}),e.jsxs(_,{align:"end",children:[e.jsx(Ge,{children:"Filter by"}),e.jsx(Je,{}),e.jsx(M,{checked:(n==null?void 0:n.status)==="pending",onCheckedChange:l=>x("pending",l),children:"Pending"}),e.jsx(M,{checked:(n==null?void 0:n.status)==="processed",onCheckedChange:l=>x("processed",l),children:"Processed"}),e.jsx(M,{checked:(n==null?void 0:n.status)==="shipped",onCheckedChange:l=>x("shipped",l),children:"Shipped"}),e.jsx(M,{checked:(n==null?void 0:n.status)==="delivered",onCheckedChange:l=>x("delivered",l),children:"Delivered"}),e.jsx(M,{checked:(n==null?void 0:n.status)==="cancelled",onCheckedChange:l=>x("cancelled",l),children:"Cancelled"})]})]}),e.jsxs(A,{size:"sm",variant:"outline",className:"h-7 gap-1 text-sm",children:[e.jsx(Ys,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only",children:"Export"})]})]})]}),e.jsxs(Ve,{"x-chunk":"dashboard-05-chunk-3",children:[e.jsxs(Ye,{className:"px-7",children:[e.jsx(Be,{children:"Orders"}),e.jsx(ze,{children:"Recent orders from your store. The orders are sorted by date, with the most recent orders displayed at the top of the table."})]}),e.jsx(Ke,{className:"max-w-full",children:e.jsx(Js,{data:((N=m==null?void 0:m.data)==null?void 0:N.data)||[],setOrderId:r,loading:(m==null?void 0:m.status)==="pending"})})]})]})},va=()=>{const[r,a]=F.useState("");return e.jsxs("main",{className:"grid flex-1 items-start gap-4 sm:py-0 md:gap-8 lg:grid-cols-3 xl:grid-cols-3",children:[e.jsx("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:col-span-2",children:e.jsx(na,{setOrderId:a})}),e.jsx("div",{children:e.jsx(Qs,{orderId:r})})]})};export{va as default};
