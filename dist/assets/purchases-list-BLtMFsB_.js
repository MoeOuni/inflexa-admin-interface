import{d as q,e as B,u as D,j as e,D as y,n as S,B as c,o as T,p as E,q as V,s as j,t as u,v as p,w as g,x as n,y as v,z as Y,g as h,I,E as G,F as C,L as O,m as Q,G as U,C as J,a as X,b as Z,H as $,c as ee}from"./index-Cpj_313k.js";import{p as se}from"./purchase-query-keys-BZk4QrP-.js";import{E as ae,u as ie,f as R,g as le,a as ne,b as re,c as te}from"./index-BQcsQ1J8.js";import{T as ce,a as oe,b,c as de,d as me,e as A}from"./table-CP6PtkBs.js";import{F as w}from"./file-text-D4otMC9N.js";import{C as he}from"./clipboard-list-BjL4G2Ay.js";import{D as m}from"./dollar-sign-C7CxiK1w.js";import{C as f}from"./circle-check-big-CWDsQ4M3.js";import{T as xe}from"./index-BFjICAYF.js";import{A as je,a as ue}from"./arrow-down-wide-narrow-BA2zBQjS.js";import{S as pe}from"./square-plus-BaUgSyD7.js";import{L as ge,F as we}from"./list-filter-CdU8SF-_.js";import"./toArray-DaCh-VYn.js";import"./shadow-smhd3i8u.js";import"./colors-CxA5wLuG.js";import"./genComponentStyleHook-BLUmqr6G.js";const Ce=async()=>(await B.get("/purchases")).data;function Ne(){return q({queryKey:se.all,queryFn:Ce})}function ve({purchase:r}){const{t}=D();return console.log(r),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:t("open_menu")}),e.jsx(ae,{className:"h-4 w-4"})]})}),e.jsxs(T,{className:"w-64",children:[e.jsx(E,{children:"Purchase Actions"}),e.jsx(V,{}),e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Invoice Management"})]}),e.jsx(p,{children:e.jsxs(g,{children:[e.jsxs(n,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"View Invoice"})]}),e.jsxs(n,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit Invoice"})]}),e.jsxs(n,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete Invoice"})]}),e.jsxs(n,{children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Duplicate Invoice"})]})]})})]}),e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Financial Actions"})]}),e.jsx(p,{children:e.jsxs(g,{children:[e.jsxs(n,{children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Update Payment Terms"})]}),e.jsxs(n,{children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Manage Payments"})]}),e.jsxs(n,{children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Issue Payment"})]}),e.jsxs(n,{children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Generate Credit Note"})]})]})})]}),e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Reports and Analytics"})]}),e.jsx(p,{children:e.jsxs(g,{children:[e.jsxs(n,{children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Generate Invoice Report"})]}),e.jsxs(n,{children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Analyze Payment Trends"})]})]})})]}),e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Invoice Verification"})]}),e.jsx(p,{children:e.jsxs(g,{children:[e.jsxs(n,{children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Verify Invoice Details"})]}),e.jsxs(n,{children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Confirm Receipt"})]})]})})]})]})]})}const be=({data:r,loading:t})=>{var F,M,P;const{currency:i}=Y(),{t:o}=D(),[d,N]=h.useState([]),[L,k]=h.useState([]),[z,H]=h.useState({}),[K,_]=h.useState({}),x=[{accessorKey:"reference",header:"Reference",cell:({row:a})=>e.jsx("div",{className:"capitalize",children:a.original.reference})},{accessorKey:"broughtAt",header:"Purchased At",cell:({row:a})=>e.jsx("div",{className:"capitalize",children:Q(a.original.broughtAt).format("DD/MM/YYYY")})},{accessorKey:"supplierLabel",header:"Supplier",cell:({row:a})=>e.jsx("div",{className:"capitalize",children:a.original.supplierLabel})},{accessorKey:"totalWithoutTax",header:"Total Price (Without Taxes)",cell:({row:a})=>{var s;return e.jsxs("div",{className:"capitalize",children:[(s=a.original.totalWithoutTax)==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",i==null?void 0:i.symbol]})}},{accessorKey:"totalTax",header:"Total Taxes",cell:({row:a})=>{var s;return e.jsxs("div",{className:"capitalize",children:[(s=a.original.totalTax)==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",i==null?void 0:i.symbol]})}},{accessorKey:"totalPrice",header:"Total Price",cell:({row:a})=>{var s;return e.jsxs("div",{className:"capitalize",children:[(s=a.original.totalPrice)==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",i==null?void 0:i.symbol]})}},{id:"actions",enableHiding:!1,cell:({row:a})=>e.jsx(ve,{purchase:a.original})}],l=ie({data:r,columns:x,onSortingChange:N,onColumnFiltersChange:k,getCoreRowModel:le(),getPaginationRowModel:ne(),getSortedRowModel:re(),getFilteredRowModel:te(),onColumnVisibilityChange:H,onRowSelectionChange:_,state:{sorting:d,columnFilters:L,columnVisibility:z,rowSelection:K}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start md:items-center flex-col md:flex-row gap-2 pb-4",children:[e.jsx(I,{placeholder:"Search by supplier...",value:((F=l.getColumn("supplierLabel"))==null?void 0:F.getFilterValue())??"",onChange:a=>{var s;return(s=l.getColumn("supplierLabel"))==null?void 0:s.setFilterValue(a.target.value)},className:"max-w-xs"}),e.jsx(I,{placeholder:"Search by reference...",value:((M=l.getColumn("reference"))==null?void 0:M.getFilterValue())??"",onChange:a=>{var s;return(s=l.getColumn("reference"))==null?void 0:s.setFilterValue(a.target.value)},className:"max-w-xs"}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"md:ml-auto",children:["Columns ",e.jsx(G,{className:"ml-2 h-4 w-4"})]})}),e.jsx(T,{align:"end",children:l.getAllColumns().filter(a=>a.getCanHide()).map(a=>{var s;return e.jsx(C,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:W=>a.toggleVisibility(!!W),children:String((s=a.columnDef)==null?void 0:s.header)},a.id)})})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ce,{children:[e.jsx(oe,{children:l.getHeaderGroups().map(a=>e.jsx(b,{children:a.headers.map(s=>e.jsx(de,{children:s.isPlaceholder?null:e.jsxs("div",{className:s.column.getCanSort()?"cursor-pointer select-none flex items-center":"",onClick:s.column.getToggleSortingHandler(),children:[e.jsx(xe,{title:s.column.getCanSort()?s.column.getNextSortingOrder()==="asc"?"Sort ascending":s.column.getNextSortingOrder()==="desc"?"Sort descending":"Clear sort":void 0,children:R(s.column.columnDef.header,s.getContext())}),{asc:e.jsx(je,{className:"h-4 w-4 ml-2"}),desc:e.jsx(ue,{className:"h-4 w-4 ml-2"})}[s.column.getIsSorted()]??null]})},s.id))},a.id))}),e.jsx(me,{children:(P=l.getRowModel().rows)!=null&&P.length?l.getRowModel().rows.map(a=>e.jsx(b,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(s=>e.jsx(A,{children:R(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(b,{children:e.jsx(A,{colSpan:x==null?void 0:x.length,className:"h-24 text-center",children:t?e.jsx("div",{className:"flex justify-center",children:e.jsx(O,{className:"mr-2 h-5 w-5 animate-spin"})}):o("no_result")})})})]})}),e.jsx("div",{className:"flex items-center justify-end space-x-2 py-4",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:o("previous")}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:o("next")})]})})]})},He=()=>{const[r,t]=h.useState("ACTIVE"),{data:i,isLoading:o}=Ne(),{t:d}=D(),N=U();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center pb-3",children:[e.jsxs(c,{size:"sm",className:"h-8 gap-1",onClick:()=>N("/purchases/save"),children:[e.jsx(pe,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:d("purchase_add_button")})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",className:"h-8 gap-1",children:[e.jsx(ge,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Filter"})]})}),e.jsxs(T,{align:"end",children:[e.jsx(E,{children:"Filter by"}),e.jsx(V,{}),e.jsx(C,{onClick:()=>{t("ACTIVE")},checked:r==="ACTIVE",children:"Active"}),e.jsx(C,{onClick:()=>{t("DELETED")},checked:r==="DELETED",children:"Deleted"}),e.jsx(C,{onClick:()=>{t("ARCHIVED")},checked:r==="ARCHIVED",children:"Archived"})]})]}),e.jsxs(c,{size:"sm",variant:"outline",className:"h-8 gap-1",children:[e.jsx(we,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Export"})]})]})]}),e.jsxs(J,{"x-chunk":"dashboard-06-chunk-0",children:[e.jsxs(X,{children:[e.jsx(Z,{children:d("purchases")}),e.jsx($,{children:d("purchases_table_description")})]}),e.jsx(ee,{children:e.jsx(be,{data:i?i==null?void 0:i.data:[],loading:o})})]})]})};export{He as default};
