import{r as t,ap as I,as as M,$ as R,_ as C,aq as y,ar as S,aR as q,j as k,a as g}from"./index-3nPIAQnH.js";import{$ as D,C as B}from"./check-BMG6f9gN.js";function O(e){const o=t.useRef({value:e,previous:e});return t.useMemo(()=>(o.current.value!==e&&(o.current.previous=o.current.value,o.current.value=e),o.current.previous),[e])}const w="Checkbox",[A,U]=I(w),[K,L]=A(w),H=t.forwardRef((e,o)=>{const{__scopeCheckbox:r,name:d,checked:l,defaultChecked:a,required:b,disabled:i,value:u="on",onCheckedChange:p,...v}=e,[n,h]=t.useState(null),N=M(o,c=>h(c)),x=t.useRef(!1),E=n?!!n.closest("form"):!0,[f=!1,m]=D({prop:l,defaultProp:a,onChange:p}),j=t.useRef(f);return t.useEffect(()=>{const c=n==null?void 0:n.form;if(c){const $=()=>m(j.current);return c.addEventListener("reset",$),()=>c.removeEventListener("reset",$)}},[n,m]),t.createElement(K,{scope:r,state:f,disabled:i},t.createElement(R.button,C({type:"button",role:"checkbox","aria-checked":s(f)?"mixed":f,"aria-required":b,"data-state":_(f),"data-disabled":i?"":void 0,disabled:i,value:u},v,{ref:N,onKeyDown:y(e.onKeyDown,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:y(e.onClick,c=>{m($=>s($)?!0:!$),E&&(x.current=c.isPropagationStopped(),x.current||c.stopPropagation())})})),E&&t.createElement(z,{control:n,bubbles:!x.current,name:d,value:u,checked:f,required:b,disabled:i,style:{transform:"translateX(-100%)"}}))}),T="CheckboxIndicator",X=t.forwardRef((e,o)=>{const{__scopeCheckbox:r,forceMount:d,...l}=e,a=L(T,r);return t.createElement(S,{present:d||s(a.state)||a.state===!0},t.createElement(R.span,C({"data-state":_(a.state),"data-disabled":a.disabled?"":void 0},l,{ref:o,style:{pointerEvents:"none",...e.style}})))}),z=e=>{const{control:o,checked:r,bubbles:d=!0,...l}=e,a=t.useRef(null),b=O(r),i=q(o);return t.useEffect(()=>{const u=a.current,p=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(p,"checked").set;if(b!==r&&n){const h=new Event("click",{bubbles:d});u.indeterminate=s(r),n.call(u,s(r)?!1:r),u.dispatchEvent(h)}},[b,r,d]),t.createElement("input",C({type:"checkbox","aria-hidden":!0,defaultChecked:s(r)?!1:r},l,{tabIndex:-1,ref:a,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function s(e){return e==="indeterminate"}function _(e){return s(e)?"indeterminate":e?"checked":"unchecked"}const P=H,F=X,G=t.forwardRef(({className:e,...o},r)=>k.jsx(P,{ref:r,className:g("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...o,children:k.jsx(F,{className:g("flex items-center justify-center text-current"),children:k.jsx(B,{className:"h-4 w-4"})})}));G.displayName=P.displayName;export{G as C};
