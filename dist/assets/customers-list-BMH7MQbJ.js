import{N as d,u as D,j as s,D as T,n as I,B as j,o as P,p as E,q as H,s as i,t as c,v as t,w as o,x as e,ad as y,ae as $,y as w,z as J,g as N,I as Q,E as X,F as k,L as Y,G as ss,C as es,a as as,b as ns,H as rs,c as ls}from"./index-Cpj_313k.js";import{u as is}from"./use-customers-pZjROUl6.js";import{E as cs,u as ts,f as L,g as os,a as ds,b as hs,c as xs}from"./index-BQcsQ1J8.js";import{T as ms,a as js,b as f,c as ps,d as us,e as _}from"./table-CP6PtkBs.js";import{F as v}from"./file-text-D4otMC9N.js";import{U as u,S as V}from"./user-DAfLxH3c.js";import{D as S}from"./dollar-sign-C7CxiK1w.js";import{C as b}from"./clipboard-list-BjL4G2Ay.js";import{C as gs}from"./circle-check-big-CWDsQ4M3.js";import{T as ws}from"./index-BFjICAYF.js";import{A as Ns,a as Cs}from"./arrow-down-wide-narrow-BA2zBQjS.js";import{S as ys}from"./square-plus-BaUgSyD7.js";import{L as fs,F as vs}from"./list-filter-CdU8SF-_.js";import"./customer-query-keys-3MpjwF4T.js";import"./toArray-DaCh-VYn.js";import"./shadow-smhd3i8u.js";import"./colors-CxA5wLuG.js";import"./genComponentStyleHook-BLUmqr6G.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=d("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=d("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=d("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=d("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=d("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=d("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=d("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=d("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Ts({customer:h}){const{t:x}=D();return console.log(h),s.jsxs(T,{children:[s.jsx(I,{asChild:!0,children:s.jsxs(j,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:x("open_menu")}),s.jsx(cs,{className:"h-4 w-4"})]})}),s.jsxs(P,{className:"w-64",children:[s.jsx(E,{children:"Customer Actions"}),s.jsx(H,{}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Exports"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Export Profiles"})]}),s.jsxs(e,{children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Export Transactions"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Profile Management"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"View Profile"})]}),s.jsxs(e,{children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Edit Profile"})]}),s.jsxs(e,{children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Delete Profile"})]}),s.jsxs(e,{children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Merge Profiles"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(S,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Financial Actions"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(S,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Update Credit Limit"})]}),s.jsxs(e,{children:[s.jsx(y,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Apply Discount"})]}),s.jsxs(e,{children:[s.jsx(y,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Revoke Discount"})]}),s.jsxs(e,{children:[s.jsx(S,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Issue Refund"})]}),s.jsxs(e,{children:[s.jsx(Ss,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Manage Account Balance"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(b,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Sales and Orders"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(b,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"View Order History"})]}),s.jsxs(e,{children:[s.jsx($,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Create Order"})]}),s.jsxs(e,{children:[s.jsx(b,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Process Return"})]}),s.jsxs(e,{children:[s.jsx(y,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Apply Coupon"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Reports and Analytics"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Generate Sales Report"})]}),s.jsxs(e,{children:[s.jsx(bs,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Analyze Purchasing Patterns"})]}),s.jsxs(e,{children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Track Engagement Metrics"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(C,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Customer Segmentation"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(C,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Segment by Purchase History"})]}),s.jsxs(e,{children:[s.jsx(C,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Segment by Location"})]}),s.jsxs(e,{children:[s.jsx(C,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Segment by Behavior"})]}),s.jsxs(e,{children:[s.jsx(Ds,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Add to Loyalty Program"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(M,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Customer Support"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(M,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"View Support Tickets"})]}),s.jsxs(e,{children:[s.jsx(M,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Manage Support Tickets"})]}),s.jsxs(e,{children:[s.jsx(Ms,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Add Notes to Profile"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(V,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Customer Verification"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(V,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Verify Contact Information"})]}),s.jsxs(e,{children:[s.jsx(gs,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Validate Identity"})]})]})})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Marketing Actions"})]}),s.jsx(t,{children:s.jsxs(o,{children:[s.jsxs(e,{children:[s.jsx(ks,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Add to Email List"})]}),s.jsxs(e,{children:[s.jsx(z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Create Marketing Campaign"})]}),s.jsxs(e,{children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Track Campaign Effectiveness"})]})]})})]})]})]})}function Is({data:h,loading:x}){var A,R;const{t:r}=D(),{currency:p}=J(),[B,K]=N.useState([]),[O,U]=N.useState([]),[q,G]=N.useState({}),[W,Z]=N.useState({}),g=[{accessorKey:"customerId",header:r("customer_id_label"),cell:({row:a})=>s.jsx("div",{children:a.original.customerId})},{accessorKey:"name",header:r("customer_name_label"),cell:({row:a})=>s.jsx("div",{className:"capitalize",children:a.original.name})},{accessorKey:"contactInfo.email",header:r("customer_email_label"),cell:({row:a})=>{var n,m;return s.jsx("div",{children:(n=a.original.contactInfo)!=null&&n.email?(m=a.original.contactInfo)==null?void 0:m.email:" - "})}},{accessorKey:"contactInfo.phone",header:r("customer_phone_label"),cell:({row:a})=>{var n;return s.jsx("div",{className:"capitalize",children:(n=a.original.contactInfo)==null?void 0:n.phone})}},{accessorKey:"financialInfo.creditLimit",header:r("customer_credit_limit_label"),cell:({row:a})=>{var m,F;const n=`${((F=(m=a.original.financialInfo)==null?void 0:m.creditLimit)==null?void 0:F.toLocaleString())??"0"}
        ${p==null?void 0:p.symbol}`;return s.jsx("div",{className:"capitalize",children:n})}},{id:"actions",enableHiding:!1,cell:({row:a})=>s.jsx(Ts,{customer:a.original})}],l=ts({data:h,columns:g,onSortingChange:K,onColumnFiltersChange:U,getCoreRowModel:os(),getPaginationRowModel:ds(),getSortedRowModel:hs(),getFilteredRowModel:xs(),onColumnVisibilityChange:G,onRowSelectionChange:Z,initialState:{pagination:{pageIndex:0,pageSize:10}},state:{sorting:B,columnFilters:O,columnVisibility:q,rowSelection:W}});return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center pb-4",children:[s.jsx(Q,{placeholder:r("search_customer"),value:((A=l.getColumn("name"))==null?void 0:A.getFilterValue())??"",onChange:a=>{var n;return(n=l.getColumn("name"))==null?void 0:n.setFilterValue(a.target.value)},className:"max-w-sm"}),s.jsxs(T,{children:[s.jsx(I,{asChild:!0,children:s.jsxs(j,{variant:"outline",className:"ml-auto",children:[r("columns")," ",s.jsx(X,{className:"ml-2 h-4 w-4"})]})}),s.jsx(P,{align:"end",children:l.getAllColumns().filter(a=>a.getCanHide()).map(a=>{var n;return s.jsx(k,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:m=>a.toggleVisibility(!!m),children:String((n=a.columnDef)==null?void 0:n.header)},a.id)})})]})]}),s.jsx("div",{className:"rounded-md border",children:s.jsxs(ms,{children:[s.jsx(js,{children:l.getHeaderGroups().map(a=>s.jsx(f,{children:a.headers.map(n=>s.jsx(ps,{children:n.isPlaceholder?null:s.jsxs("div",{className:n.column.getCanSort()?"cursor-pointer select-none flex items-center":"",onClick:n.column.getToggleSortingHandler(),children:[s.jsx(ws,{title:n.column.getCanSort()?n.column.getNextSortingOrder()==="asc"?"Sort ascending":n.column.getNextSortingOrder()==="desc"?"Sort descending":"Clear sort":void 0,children:L(n.column.columnDef.header,n.getContext())}),{asc:s.jsx(Ns,{className:"h-4 w-4 ml-2"}),desc:s.jsx(Cs,{className:"h-4 w-4 ml-2"})}[n.column.getIsSorted()]??null]})},n.id))},a.id))}),s.jsx(us,{children:(R=l.getRowModel().rows)!=null&&R.length?l.getRowModel().rows.map(a=>s.jsx(f,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(n=>s.jsx(_,{children:L(n.column.columnDef.cell,n.getContext())},n.id))},a.id)):s.jsx(f,{children:s.jsx(_,{colSpan:g==null?void 0:g.length,className:"h-24 text-center",children:x?s.jsx("div",{className:"flex justify-center",children:s.jsx(Y,{className:"mr-2 h-5 w-5 animate-spin"})}):"No results."})})})]})}),s.jsx("div",{className:"flex items-center justify-end space-x-2 py-4",children:s.jsxs("div",{className:"space-x-2",children:[s.jsx(j,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:r("previous")}),s.jsx(j,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:r("next")})]})})]})}const $s=()=>{var p;const{t:h}=D(),x=is(),r=ss();return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center pb-3",children:[s.jsxs(j,{size:"sm",className:"h-8 gap-1",onClick:()=>r("/customers/save"),children:[s.jsx(ys,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:h("customer_add_button")})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsxs(T,{children:[s.jsx(I,{asChild:!0,children:s.jsxs(j,{variant:"outline",size:"sm",className:"h-8 gap-1",children:[s.jsx(fs,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Filter"})]})}),s.jsxs(P,{align:"end",children:[s.jsx(E,{children:"Filter by"}),s.jsx(H,{}),s.jsx(k,{checked:!0,children:"Active"}),s.jsx(k,{children:"Archived"})]})]}),s.jsxs(j,{size:"sm",variant:"outline",className:"h-8 gap-1",children:[s.jsx(vs,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Export"})]})]})]}),s.jsxs(es,{children:[s.jsxs(as,{children:[s.jsx(ns,{children:h("customers")}),s.jsx(rs,{children:h("customers_table_description")})]}),s.jsx(ls,{children:s.jsx(Is,{data:x.data?(p=x.data)==null?void 0:p.data:[],loading:x.isLoading})})]})]})};export{$s as default};
