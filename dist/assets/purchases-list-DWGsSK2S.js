import{c as i,f as H,d as V,r as d,j as e,T as A}from"./index-3nPIAQnH.js";import{u as I,a as K}from"./api-clients-BUUlQTs0.js";import{p as W}from"./purchase-query-keys-BZk4QrP-.js";import{u as Y,C as Z,T as B,a as O,b as x,c as Q,f as g,d as _,e as j,E as G,g as J,h as U,i as X,j as $}from"./table-D1Irnn66.js";import{B as h}from"./button-CtZ5qbJi.js";import{D as y,a as w,b as v,f as ee,d as se,e as k,g as b,c as n,h as S,i as C,j as M,k as N}from"./dropdown-menu-DlVyJQqp.js";import{I as f}from"./input-CN_5s6Mi.js";import{d as ae}from"./dayjs.min-DLk4Du8q.js";import{A as te,a as le}from"./arrow-down-wide-narrow-DJ376HxP.js";import"./index-_x51y03b.js";import"./check-BMG6f9gN.js";import"./Combination-CsG-0PjX.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=i("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=i("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=i("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=i("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=i("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=i("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=i("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=i("Sheet",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=i("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),pe=async()=>(await K.get("/purchases")).data;function ue(){return I({queryKey:W.all,queryFn:pe})}const ge=({data:r})=>{var m,p,u;const{currency:l}=H(),{t:o}=V(),[D,T]=d.useState([]),[P,F]=d.useState([]),[R,q]=d.useState({}),[z,L]=d.useState({}),c=[{accessorKey:"reference",header:"Reference",cell:({row:a})=>e.jsx("div",{className:"capitalize",children:a.original.reference})},{accessorKey:"broughtAt",header:"Purchased At",cell:({row:a})=>e.jsx("div",{className:"capitalize",children:ae(a.original.broughtAt).format("DD/MM/YYYY")})},{accessorKey:"supplierLabel",header:"Supplier",cell:({row:a})=>e.jsx("div",{className:"capitalize",children:a.original.supplierLabel})},{accessorKey:"totalWithoutTax",header:"Total Price (Without Taxes)",cell:({row:a})=>{var s;return e.jsxs("div",{className:"capitalize",children:[(s=a.original.totalWithoutTax)==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",l==null?void 0:l.symbol]})}},{accessorKey:"totalTax",header:"Total Taxes",cell:({row:a})=>{var s;return e.jsxs("div",{className:"capitalize",children:[(s=a.original.totalTax)==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",l==null?void 0:l.symbol]})}},{accessorKey:"totalPrice",header:"Total Price",cell:({row:a})=>{var s;return e.jsxs("div",{className:"capitalize",children:[(s=a.original.totalPrice)==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",l==null?void 0:l.symbol]})}},{id:"actions",enableHiding:!1,cell:()=>e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(h,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:o("open_menu")}),e.jsx(G,{className:"h-4 w-4"})]})}),e.jsxs(v,{align:"end",children:[e.jsx(se,{children:o("actions")}),e.jsx(k,{}),e.jsxs(b,{children:[e.jsxs(n,{children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"View Details"})]}),e.jsxs(S,{children:[e.jsxs(C,{children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsx(M,{children:e.jsxs(N,{children:[e.jsxs(n,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export as PDF"})]}),e.jsxs(n,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export as Excel"})]})]})})]}),e.jsxs(S,{children:[e.jsxs(C,{children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Share"})]}),e.jsx(M,{children:e.jsxs(N,{children:[e.jsxs(n,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Share via Link"})]}),e.jsxs(n,{children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Share via Email"})]})]})})]})]}),e.jsx(k,{}),e.jsxs(b,{children:[e.jsxs(n,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(n,{children:[e.jsx(ie,{className:"mr-2 h-4 w-4"})," ",e.jsx("span",{children:"Archive"})]})]})]})]})}],t=Y({data:r,columns:c,onSortingChange:T,onColumnFiltersChange:F,getCoreRowModel:J(),getPaginationRowModel:U(),getSortedRowModel:X(),getFilteredRowModel:$(),onColumnVisibilityChange:q,onRowSelectionChange:L,state:{sorting:D,columnFilters:P,columnVisibility:R,rowSelection:z}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start md:items-center flex-col md:flex-row gap-2 py-4",children:[e.jsx(f,{placeholder:"Search by supplier...",value:((m=t.getColumn("supplierLabel"))==null?void 0:m.getFilterValue())??"",onChange:a=>{var s;return(s=t.getColumn("supplierLabel"))==null?void 0:s.setFilterValue(a.target.value)},className:"max-w-xs"}),e.jsx(f,{placeholder:"Search by reference...",value:((p=t.getColumn("reference"))==null?void 0:p.getFilterValue())??"",onChange:a=>{var s;return(s=t.getColumn("reference"))==null?void 0:s.setFilterValue(a.target.value)},className:"max-w-xs"}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"md:ml-auto",children:["Columns ",e.jsx(Z,{className:"ml-2 h-4 w-4"})]})}),e.jsx(v,{align:"end",children:t.getAllColumns().filter(a=>a.getCanHide()).map(a=>{var s;return e.jsx(ee,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:E=>a.toggleVisibility(!!E),children:String((s=a.columnDef)==null?void 0:s.header)},a.id)})})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(B,{children:[e.jsx(O,{children:t.getHeaderGroups().map(a=>e.jsx(x,{children:a.headers.map(s=>e.jsx(Q,{children:s.isPlaceholder?null:e.jsxs("div",{className:s.column.getCanSort()?"cursor-pointer select-none flex items-center":"",onClick:s.column.getToggleSortingHandler(),children:[e.jsx(A,{title:s.column.getCanSort()?s.column.getNextSortingOrder()==="asc"?"Sort ascending":s.column.getNextSortingOrder()==="desc"?"Sort descending":"Clear sort":void 0,children:g(s.column.columnDef.header,s.getContext())}),{asc:e.jsx(te,{className:"h-4 w-4 ml-2"}),desc:e.jsx(le,{className:"h-4 w-4 ml-2"})}[s.column.getIsSorted()]??null]})},s.id))},a.id))}),e.jsx(_,{children:(u=t.getRowModel().rows)!=null&&u.length?t.getRowModel().rows.map(a=>e.jsx(x,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(s=>e.jsx(j,{children:g(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(x,{children:e.jsx(j,{colSpan:c==null?void 0:c.length,className:"h-24 text-center",children:o("no_result")})})})]})}),e.jsx("div",{className:"flex items-center justify-end space-x-2 py-4",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:o("previous")}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:o("next")})]})})]})},Te=()=>{const{data:r}=ue();return e.jsx("div",{children:e.jsx(ge,{data:r?r==null?void 0:r.purchases:[]})})};export{Te as default};
