import{J as w,K as S,M as u,e as E,G as A,z as k,g as I,j as e,B as y,C as g,a as C,b as f,c as N,I as l}from"./index-Cpj_313k.js";import{C as z}from"./checkbox-CIFzVmYh.js";import{C as p,a as B}from"./store-Bt4IQKUI.js";import{u as D,t as P,F as V,a,b as n,c as t,d as o,e as c,f as F}from"./index-Bir7vsR2.js";import{P as K}from"./phone-input-Cm94bRnn.js";import{c as L}from"./customer-query-keys-3MpjwF4T.js";import{B as M}from"./back-button-D-5gooSg.js";import{C as Q,S as T}from"./save-BqmzOMAP.js";import"./index-DzltJMM4.js";import"./command-BLH0lZHp.js";import"./popover-DROVBhEs.js";import"./index-BdQq_4o_.js";const q=async m=>await E.post("/customers/init",m);function J(){const m=w();return S({mutationFn:q,onSuccess:()=>{m.invalidateQueries({queryKey:L.all}),u.success("Customer created successfully")},onError:i=>{var d,h;u.error(((h=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:h.message)||"An error occurred. Please try again.")}})}function $(){const m=A(),i=J(),{currency:d}=k(),[h,b]=I.useState({...p}),r=D({resolver:P(B),defaultValues:h,mode:"onChange"}),v=async s=>{let x="";await i.mutateAsync(s),x=i.status,x==="success"&&(b({...p}),r.reset(p))};return e.jsx(V,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(v),className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{onClick:()=>{m("/customers")}}),e.jsx("h1",{className:"flex-1 shrink-0 whitespace-nowrap text-xl font-semibold tracking-tight sm:grow-0",children:"New Customer"}),e.jsxs("div",{className:"hidden items-center gap-2 md:ml-auto md:flex",children:[e.jsxs(y,{type:"button",variant:"outline",size:"sm",className:"h-8 gap-1",onClick:()=>{r.reset({})},children:[e.jsx(Q,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Discard"})]}),e.jsxs(y,{type:"submit",size:"sm",disabled:i.isPending,className:"h-8 gap-1",children:[e.jsx(T,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Save Customer"})]})]})]}),e.jsxs(g,{children:[e.jsx(C,{children:e.jsx(f,{children:"Customer Information"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"name",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Customer Name"}),e.jsx(o,{children:e.jsx(l,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"email",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(o,{children:e.jsx(l,{...s,id:"email",type:"email",placeholder:"Enter email address",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$"})}),e.jsx(F,{children:"You don't have to provide your email, but if you do, we can create an account for you later to see your orders and purchases."}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phnoe",children:"Phone"}),e.jsx(o,{children:e.jsx(K,{defaultCountry:"TN",placeholder:"Enter a phone number",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"fax",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"fax",children:"Fax"}),e.jsx(o,{children:e.jsx(l,{...s,id:"fax",type:"tel",placeholder:"Enter fax number",pattern:"^+?d{1,2}?[-s]?(?d{3})?[-s]?d{3}[-s]?d{4}$"})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"customerId",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"id",children:"Customer ID"}),e.jsx(o,{children:e.jsx(l,{id:"id",placeholder:"Enter customer ID",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"creditLimit",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsxs(t,{htmlFor:"creditLimit",children:["Advance payment (",d==null?void 0:d.symbol,")"]}),e.jsx(o,{children:e.jsx(l,{id:"balance",type:"number",placeholder:"Enter balance",defaultValue:0,step:"0.01",min:0,...s,onChange:x=>{const j=parseFloat(x.target.value);s.onChange(typeof j=="number"&&j)}})}),e.jsx(c,{})]})})]})})]}),e.jsxs(g,{children:[e.jsx(C,{children:e.jsx(f,{children:"Shipping Address"})}),e.jsxs(N,{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"shippingAddress.street",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"street",children:"Street"}),e.jsx(o,{children:e.jsx(l,{id:"street",placeholder:"Enter street address",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"shippingAddress.city",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"city",children:"City"}),e.jsx(o,{children:e.jsx(l,{id:"city",placeholder:"Enter city",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{control:r.control,name:"shippingAddress.state",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"state",children:"State"}),e.jsx(o,{children:e.jsx(l,{id:"state",placeholder:"Enter state",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"shippingAddress.postalCode",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"postalCode",children:"Postal Code"}),e.jsx(o,{children:e.jsx(l,{id:"postalCode",placeholder:"Enter postal code",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:r.control,name:"shippingAddress.country",render:({field:s})=>e.jsxs(n,{className:"space-y-2",children:[e.jsx(t,{htmlFor:"country",children:"Country"}),e.jsx(o,{children:e.jsx(l,{id:"country",placeholder:"Enter country",...s})}),e.jsx(c,{})]})})]}),e.jsx(a,{control:r.control,name:"identicalShippingAndBilling",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(o,{children:e.jsx(z,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(t,{children:"Shipping address is the same as billing address"}),e.jsx(F,{children:"If your shipping address is identical to your billing address, you can check this box to save time. This way, you won't need to enter the same information twice."})]})]})})]})]})]})})}const re=()=>e.jsx($,{});export{re as default};
