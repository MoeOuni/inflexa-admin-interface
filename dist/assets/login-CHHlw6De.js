import{J as j,K as h,bW as p,M as b,e as C,g as y,bX as f,G as w,j as s,C as F,a as N,b as P,H as L,c as v,I as l,ac as S,B as E,L as I}from"./index-Cpj_313k.js";import{z as o,u as A,F as K,a as c,b as d,c as m,d as u,e as x,t as M}from"./index-Bir7vsR2.js";const Q=async n=>await C.post("/login",n);function q(){const n=j();return h({mutationFn:Q,onSuccess:()=>{n.invalidateQueries({queryKey:p.details()})},onError:e=>{var r,a;b.error(((a=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:a.message)||"An error occurred. Please try again.")}})}const B=o.object({email:o.string().email(),password:o.string().min(8,{message:"Password must be at least 8 characters long"}).max(32,{message:"Password must be at most 32 characters long"})}),J=()=>{const{setToken:n}=y.useContext(f),e=q(),r=w(),a=A({resolver:M(B),defaultValues:{email:"",password:""},mode:"onChange"});async function g(t){const i=await e.mutateAsync(t);i.status===200&&(n(i.data.data),r("/"))}return s.jsx(K,{...a,children:s.jsx("form",{onSubmit:a.handleSubmit(g),children:s.jsxs(F,{className:"w-full max-w-sm",children:[s.jsxs(N,{children:[s.jsxs(P,{className:"text-2xl flex items-center gap-2",children:["Login to"," ",s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("img",{src:"./icon-logo.svg",className:"h-8"})," ",s.jsx("span",{style:{color:"#0074D9"},children:"Inflexa admin"})]})]}),s.jsx(L,{children:"Enter your email below to login to your account."})]}),s.jsxs(v,{className:"grid gap-4",children:[s.jsx(c,{control:a.control,name:"email",render:({field:t})=>s.jsxs(d,{children:[s.jsx(m,{children:"Email"}),s.jsx(u,{children:s.jsx(l,{...t,disabled:e.isPending})}),s.jsx(x,{})]})}),s.jsx(c,{control:a.control,name:"password",render:({field:t})=>s.jsxs(d,{children:[s.jsx(m,{children:"Password"}),s.jsx(u,{children:s.jsx(l,{...t,disabled:e.isPending,type:"password"})}),s.jsx(x,{})]})})]}),s.jsx(S,{children:s.jsxs(E,{className:"w-full",type:"submit",disabled:e.isPending,children:[e.isPending&&s.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"})," ","Sign in"]})})]})})})};export{J as default};
